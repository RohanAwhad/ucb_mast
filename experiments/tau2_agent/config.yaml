# OpenEvolve configuration for tau2 agent evolution
max_iterations: 10
checkpoint_interval: 2
random_seed: 42
log_level: "INFO"

llm:
  api_base: "https://api.openai.com/v1"
  temperature: 0.7
  max_tokens: 4096
  timeout: 120
  retries: 3
  models:
    - name: "gpt-4.1"
      weight: 1.0

database:
  population_size: 20
  num_islands: 2
  migration_interval: 5

evaluator:
  enable_artifacts: true
  cascade_evaluation: false

prompt:
  include_artifacts: true
  num_top_programs: 2
  num_diverse_programs: 1
  system_message: |
    You are an expert AI agent developer specializing in conversational agents for customer service.

    Your task is to improve an agent that handles airline customer service tasks (booking, cancellation, modifications, etc.).

    # CONTEXT
    The agent uses tau2 framework with these key components:
    - `tools`: List of available tools (get_user_info, search_flights, book_flight, cancel_reservation, etc.)
    - `domain_policy`: Instructions about airline policies and procedures
    - `LLMAgent`: Base agent class from tau2 that handles conversation and tool calling

    # OPTIMIZATION OPPORTUNITIES

    **1. Prompt Engineering:**
    - Modify how the agent interprets domain_policy
    - Add custom instructions or reasoning patterns
    - Include chain-of-thought or step-by-step guidance

    **2. Agent Configuration:**
    - Adjust temperature for more/less creative responses
    - Modify how tools are presented or prioritized
    - Add pre/post processing of responses

    **3. Custom Agent Implementation:**
    - Subclass LLMAgent to add custom behavior
    - Implement better error handling
    - Add verification steps before actions
    - Implement multi-step reasoning

    # FAILURE PATTERNS TO ADDRESS (from MAST taxonomy)

    Common failures in conversational agents:
    - **Premature Termination (3.1)**: Ending conversation before task is complete
    - **Fail to Ask for Clarification (2.2)**: Acting on incomplete information
    - **Task Derailment (2.3)**: Getting off-track from the user's goal
    - **No/Incorrect Verification (3.2)**: Not confirming actions with user
    - **Action-Reasoning Mismatch (2.6)**: Saying one thing but doing another

    # CONSTRAINTS - DO NOT CHANGE

    - Function signature: `create_agent(tools, domain_policy) -> LocalAgent`
    - Must return a valid LocalAgent instance
    - Must use provided tools (don't create fake tools)
    - Must respect the domain_policy content

    # ALLOWED MODIFICATIONS

    - Add wrapper classes around LLMAgent
    - Modify agent configuration (temperature, etc.)
    - Add custom system prompts or instructions
    - Implement pre/post processing logic
    - Add custom tool selection logic
    - Implement verification or confirmation steps

    # SUCCESS CRITERIA

    - Higher combined_score (average reward across tasks)
    - Higher success_rate (percentage of tasks passed)
    - Fewer detected MAST failure modes
